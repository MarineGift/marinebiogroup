(()=>{var e={};e.id=56,e.ids=[56],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(5648),s(2029),s(5866);var r=s(3191),a=s(8716),l=s(7922),d=s.n(l),i=s(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let o=["",{children:["admin",{children:["gallery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5648)),"D:\\0_프로그램개발\\Github\\marinebiogroup\\src\\app\\admin\\gallery\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"D:\\0_프로그램개발\\Github\\marinebiogroup\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\0_프로그램개발\\Github\\marinebiogroup\\src\\app\\admin\\gallery\\page.tsx"],x="/admin/gallery/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/gallery/page",pathname:"/admin/gallery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3999:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},961:()=>{},5100:(e,t,s)=>{Promise.resolve().then(s.bind(s,9763))},9763:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(326),a=s(7577),l=s(6226),d=s(3069);function i(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(1),[n,o]=(0,a.useState)(0),[c,x]=(0,a.useState)(0),[m]=(0,a.useState)(12),[h,u]=(0,a.useState)([]),[p,b]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[j,v]=(0,a.useState)(!1),[f,N]=(0,a.useState)(""),[w,P]=(0,a.useState)(!1),[k,S]=(0,a.useState)(""),[C,_]=(0,a.useState)(""),[G,D]=(0,a.useState)(""),[E,q]=(0,a.useState)([]),[I,L]=(0,a.useState)([]),[A,K]=(0,a.useState)(!1),T=async(e=1,s="",r="")=>{v(!0),N("");try{let a=new URLSearchParams({page:e.toString(),limit:m.toString(),...s&&{category:s},...r&&{search:r}}),l=await fetch(`/api/gallery?${a}`),d=await l.json();d.success?(t(d.data),i(d.pagination.currentPage),o(d.pagination.totalPages),x(d.pagination.totalItems),u(d.categories)):N("갤러리 데이터를 불러오는데 실패했습니다.")}catch(e){N("네트워크 오류가 발생했습니다."),console.error("Error fetching gallery data:",e)}finally{v(!1)}},R=e=>{let t=E.filter((t,s)=>s!==e),s=I.filter((t,s)=>s!==e);URL.revokeObjectURL(I[e]),q(t),L(s)},U=async()=>{if(!k.trim()){alert("제목을 입력해주세요.");return}if(!C.trim()){alert("카테고리를 입력해주세요.");return}if(0===E.length){alert("이미지를 선택해주세요.");return}K(!0);try{for(let e of E){let t=new FormData;if(t.append("title",k),t.append("category",C),t.append("description",G),t.append("image",e),!(await fetch("/api/gallery",{method:"POST",body:t})).ok)throw Error("업로드 실패")}alert("이미지가 성공적으로 업로드되었습니다."),S(""),_(""),D(""),q([]),L([]),P(!1),T(s,p,g)}catch(e){console.error("Upload error:",e),alert("업로드 중 오류가 발생했습니다.")}finally{K(!1)}},F=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{(await fetch(`/api/gallery/${e}`,{method:"DELETE"})).ok?(alert("이미지가 삭제되었습니다."),T(s,p,g)):alert("삭제 중 오류가 발생했습니다.")}catch(e){console.error("Delete error:",e),alert("삭제 중 오류가 발생했습니다.")}};return(0,r.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"갤러리 관리"}),r.jsx("button",{onClick:()=>P(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:"새 이미지 추가"})]}),(0,r.jsxs)("div",{className:"mb-6 flex gap-4 items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"검색"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(1),T(1,p,g)},className:"flex gap-2",children:[r.jsx("input",{type:"text",value:g,onChange:e=>y(e.target.value),placeholder:"제목으로 검색...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md"}),r.jsx("button",{type:"submit",className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600",children:"검색"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"카테고리"}),(0,r.jsxs)("select",{value:p,onChange:e=>{b(e.target.value),i(1)},className:"px-3 py-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"전체"}),h.map(e=>r.jsx("option",{value:e,children:e},e))]})]})]}),j&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"로딩 중..."})]}),f&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),!j&&!f&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6",children:e.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"relative aspect-square",children:r.jsx(l.default,{src:e.image,alt:e.title,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"p-3",children:[r.jsx("h3",{className:"font-medium truncate",children:e.title}),r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:e.category}),e.description&&r.jsx("p",{className:"text-xs text-gray-600 truncate",children:e.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[r.jsx("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),r.jsx("button",{onClick:()=>F(e.id),className:"text-red-500 hover:text-red-700 text-sm",children:"삭제"})]})]})]},e.id))}),0===e.length&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"갤러리 항목이 없습니다."})}),r.jsx(d.Z,{currentPage:s,totalPages:n,onPageChange:e=>{i(e)},showInfo:!0,itemsPerPage:m,totalItems:c})]}),w&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"새 이미지 추가"}),r.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"제목 *"}),r.jsx("input",{type:"text",value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"이미지 제목을 입력하세요"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"카테고리 *"}),r.jsx("input",{type:"text",value:C,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"카테고리를 입력하세요"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"설명"}),r.jsx("textarea",{value:G,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"이미지 설명을 입력하세요"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"이미지 선택 (최대 5개) *"}),r.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files||[]),s=t.filter(e=>e.type.startsWith("image/"));s.length!==t.length&&alert("이미지 파일만 업로드 가능합니다.");let r=s.slice(0,5);q(r),L(r.map(e=>URL.createObjectURL(e)))},className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),I.length>0&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"미리보기"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:I.map((e,t)=>(0,r.jsxs)("div",{className:"relative aspect-square border rounded",children:[r.jsx(l.default,{src:e,alt:`Preview ${t+1}`,fill:!0,className:"object-cover rounded"}),r.jsx("button",{onClick:()=>R(t),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"✕"})]},t))})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:A,children:"취소"}),r.jsx("button",{onClick:U,disabled:A||0===E.length,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:A?"업로드 중...":"업로드"})]})]})})]})}},3069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(326),a=s(7577);function l({currentPage:e,totalPages:t,onPageChange:s,showInfo:l=!0,itemsPerPage:d=10,totalItems:i=0}){let[n,o]=(0,a.useState)([]),c=r=>{r>=1&&r<=t&&r!==e&&s(r)};return t<=1?null:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-6",children:[l&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["페이지 ",e," / ",t,i>0&&(0,r.jsxs)("span",{className:"ml-2",children:["(총 ",i.toLocaleString(),"개 항목, 페이지당 ",d,"개)"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>{1!==e&&s(1)},disabled:1===e,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"첫 페이지",children:"\xab\xab"}),r.jsx("button",{onClick:()=>{e>1&&s(e-1)},disabled:1===e,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"이전 페이지",children:"‹"}),n.length>0&&n[0]>1&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>c(1),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"1"}),n[0]>2&&r.jsx("span",{className:"px-2 py-2 text-sm text-gray-400",children:"..."})]}),n.map(t=>r.jsx("button",{onClick:()=>c(t),className:`px-3 py-2 text-sm border rounded-md ${t===e?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:bg-gray-50"}`,children:t},t)),n.length>0&&n[n.length-1]<t&&(0,r.jsxs)(r.Fragment,{children:[n[n.length-1]<t-1&&r.jsx("span",{className:"px-2 py-2 text-sm text-gray-400",children:"..."}),r.jsx("button",{onClick:()=>c(t),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:t})]}),r.jsx("button",{onClick:()=>{e<t&&s(e+1)},disabled:e===t,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"다음 페이지",children:"›"}),r.jsx("button",{onClick:()=>{e!==t&&s(t)},disabled:e===t,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"마지막 페이지",children:"\xbb\xbb"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{children:"페이지 이동:"}),r.jsx("input",{type:"number",min:"1",max:t,className:"w-16 px-2 py-1 border border-gray-300 rounded text-center",onKeyDown:e=>{if("Enter"===e.key){let s=parseInt(e.target.value);s>=1&&s<=t&&(c(s),e.target.value="")}},placeholder:e.toString()}),(0,r.jsxs)("span",{children:["/ ",t]})]})]})}},5648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`D:\0_프로그램개발\Github\marinebiogroup\src\app\admin\gallery\page.tsx#default`)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>d});var r=s(9510),a=s(5384),l=s.n(a);s(5023);let d={title:"KICT Group",description:"혁신과 기술로 미래를 만들어가는 기업"};function i({children:e}){return r.jsx("html",{lang:"ko",children:(0,r.jsxs)("body",{className:l().className,children:[r.jsx("header",{className:"bg-white shadow-md sticky top-0 z-50",children:r.jsx("nav",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-xl",children:"K"})}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"KICT Group"})]}),(0,r.jsxs)("div",{className:"hidden md:flex space-x-8",children:[r.jsx("a",{href:"/",className:"text-gray-700 hover:text-blue-600",children:"홈"}),r.jsx("a",{href:"/about",className:"text-gray-700 hover:text-blue-600",children:"회사소개"}),r.jsx("a",{href:"/services",className:"text-gray-700 hover:text-blue-600",children:"언론보도"}),r.jsx("a",{href:"/services",className:"text-gray-700 hover:text-blue-600",children:"서비스"}),r.jsx("a",{href:"/contact",className:"text-gray-700 hover:text-blue-600",children:"연락처"})]})]})})}),r.jsx("main",{className:"min-h-screen",children:e}),r.jsx("footer",{className:"bg-gray-900 text-white py-12",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold",children:"KICT Group"})]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"혁신과 기술로 미래를 만들어가는 기업"}),r.jsx("p",{className:"text-gray-400",children:"\xa9 2024 KICT Group. All rights reserved."})]})})]})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,349,226],()=>s(3756));module.exports=r})();