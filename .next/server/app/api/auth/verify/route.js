"use strict";(()=>{var e={};e.id=571,e.ids=[571],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2753:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>u});var i=t(9303),a=t(8716),o=t(670),n=t(7070);async function u(e){try{let{idToken:r}=await e.json();if(!r)return n.NextResponse.json({error:"토큰이 제공되지 않았습니다."},{status:400});let t=await verifyIdToken(r),s=t.uid,i=await adminDb.collection("users").doc(s).get();if(!i.exists)return n.NextResponse.json({error:"사용자를 찾을 수 없습니다."},{status:404});let a=i.data();return n.NextResponse.json({success:!0,user:{uid:t.uid,email:t.email,emailVerified:t.email_verified,role:a?.role||"user",...a}})}catch(e){return console.error("토큰 검증 실패:",e),n.NextResponse.json({error:"유효하지 않은 토큰입니다."},{status:401})}}async function p(e){try{let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return n.NextResponse.json({error:"인증 헤더가 없습니다."},{status:401});let t=r.split("Bearer ")[1],s=await verifyIdToken(t);return n.NextResponse.json({success:!0,uid:s.uid,email:s.email,emailVerified:s.email_verified})}catch(e){return console.error("토큰 검증 실패:",e),n.NextResponse.json({error:"인증에 실패했습니다."},{status:401})}}let d=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/verify/route",pathname:"/api/auth/verify",filename:"route",bundlePath:"app/api/auth/verify/route"},resolvedPagePath:"D:\\0_프로그램개발\\Github\\marinebiogroup\\src\\app\\api\\auth\\verify\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:f}=d,m="/api/auth/verify/route";function h(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:c})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972],()=>t(2753));module.exports=s})();