(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{2305:function(e,t,s){Promise.resolve().then(s.bind(s,3604))},3604:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var l=s(7437),r=s(2265),a=s(7648);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[c,n]=(0,r.useState)(1),[d,x]=(0,r.useState)(1),[o,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[p,g]=(0,r.useState)({title:"",subtitle:"",description:"",imageUrl:"",linkUrl:"",isActive:!0,sortOrder:0});(0,r.useEffect)(()=>{b()},[c]);let b=async()=>{i(!0);try{let e=await fetch("/api/carousel?page=".concat(c,"&limit=10&admin=true")),s=await e.json();s.success&&(t(s.carousels),x(s.pagination.totalPages))}catch(e){console.error("Error loading carousels:",e)}finally{i(!1)}},y=async e=>{e.preventDefault(),i(!0);try{let e=m?{...p,id:m.id}:{...p,createdBy:"admin"},t=await fetch("/api/carousel",{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();s.success?(alert(m?"캐러셀이 수정되었습니다.":"캐러셀이 생성되었습니다."),u(!1),h(null),v(),b()):alert(s.error||"오류가 발생했습니다.")}catch(e){console.error("Submit error:",e),alert("서버 오류가 발생했습니다.")}finally{i(!1)}},f=async e=>{if(confirm("정말로 이 캐러셀을 삭제하시겠습니까?"))try{let t=await fetch("/api/carousel?id=".concat(e),{method:"DELETE"}),s=await t.json();s.success?(alert("캐러셀이 삭제되었습니다."),b()):alert(s.error||"삭제에 실패했습니다.")}catch(e){console.error("Delete error:",e),alert("삭제 중 오류가 발생했습니다.")}},j=e=>{g({title:e.title,subtitle:e.subtitle||"",description:e.description||"",imageUrl:e.imageUrl,linkUrl:e.linkUrl||"",isActive:e.isActive,sortOrder:e.sortOrder}),h(e),u(!0)},v=()=>{g({title:"",subtitle:"",description:"",imageUrl:"",linkUrl:"",isActive:!0,sortOrder:0})},N=e=>new Date(e).toLocaleString("ko-KR");return(0,l.jsxs)("div",{className:"pt-20 min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"캐러셀 관리"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"메인 페이지 캐러셀을 관리합니다"})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(a.default,{href:"/admin",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← 돌아가기"}),(0,l.jsx)("button",{onClick:()=>{v(),h(null),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ 새 캐러셀"})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("div",{className:"text-lg text-gray-600 mt-4",children:"로딩 중..."})]}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"미리보기"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"제목"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"상태"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"순서"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"생성일"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"액션"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===e.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"아직 캐러셀이 없습니다. 새 캐러셀을 만들어보세요."})}):e.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-20 h-12 object-cover rounded"})}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),e.subtitle&&(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.subtitle})]})}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"활성":"비활성"})}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.sortOrder}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:N(e.createdAt)}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>j(e),className:"text-blue-600 hover:text-blue-800 text-sm",children:"수정"}),(0,l.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"삭제"})]})})]},e.id))})]})}),d>1&&(0,l.jsx)("div",{className:"px-6 py-4 bg-gray-50 flex justify-center",children:(0,l.jsx)("nav",{className:"flex space-x-2",children:Array.from({length:d},(e,t)=>t+1).map(e=>(0,l.jsx)("button",{onClick:()=>n(e),className:"px-3 py-2 text-sm rounded-md ".concat(e===c?"bg-blue-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"),children:e},e))})})]})]}),o&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,l.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:m?"캐러셀 수정":"새 캐러셀 생성"}),(0,l.jsx)("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"제목 *"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.title,onChange:e=>g({...p,title:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"부제목"}),(0,l.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.subtitle,onChange:e=>g({...p,subtitle:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"설명"}),(0,l.jsx)("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.description,onChange:e=>g({...p,description:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이미지 URL *"}),(0,l.jsx)("input",{type:"url",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.imageUrl,onChange:e=>g({...p,imageUrl:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"링크 URL"}),(0,l.jsx)("input",{type:"url",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.linkUrl,onChange:e=>g({...p,linkUrl:e.target.value}),placeholder:"/about"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"정렬 순서"}),(0,l.jsx)("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.sortOrder,onChange:e=>g({...p,sortOrder:parseInt(e.target.value)||0})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태"}),(0,l.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:p.isActive?"true":"false",onChange:e=>g({...p,isActive:"true"===e.target.value}),children:[(0,l.jsx)("option",{value:"true",children:"활성"}),(0,l.jsx)("option",{value:"false",children:"비활성"})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:s?"처리 중...":m?"수정하기":"생성하기"}),(0,l.jsx)("button",{type:"button",onClick:()=>u(!1),className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"취소"})]})]})]})})})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=2305)}),_N_E=e.O()}]);